{"ast":null,"code":"import _defineProperty from \"/Users/karthik-dhaaru/Documents/Workspace/Dharani/expense_tracker/expense_tracker_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/karthik-dhaaru/Documents/Workspace/Dharani/expense_tracker/expense_tracker_frontend/src/components/expenseType.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport Input from \"./common/input\";\nimport Select from \"./common/select\";\nimport Table from \"./common/table\";\nimport Joi from \"joi-browser\";\nimport _ from \"lodash\";\nimport { connect } from \"react-redux\";\nimport { getExpenseType, addExpenseType, updateExpenseType, deleteExpenseType } from \"./../actions/expenseType\";\nimport Edit from \"./common/edit\";\nimport Delete from \"./common/delete\";\n\nclass ExpenseType extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      _id: \"\",\n      name: \"\",\n      need: \"\",\n      options: [\"Primary\", \"Secondary\", \"Misc\"],\n      columns: [\"\", \"ID\", \"Type\", \"Need\", \"\"],\n      data: [],\n      errors: {},\n      displayUpdate: false,\n      displayAdd: true\n    };\n    this.schema = {\n      name: Joi.string().required(),\n      need: Joi.string().min(3).required()\n    };\n\n    this.validateFormDetails = event => {\n      const options = {\n        abortEarly: false\n      };\n\n      const _Joi$validate = Joi.validate({\n        name: this.state.name,\n        need: this.state.need\n      }, this.schema, options),\n            error = _Joi$validate.error;\n\n      if (!error) return \"valid\";\n\n      const errors = _objectSpread({}, this.state.errors);\n\n      error.details.map(errorDetails => {\n        const errorState = errorDetails.message.match(/\"(.*?)\"/);\n        errors[errorState[1]] = errorDetails.message;\n        this.setState({\n          errors\n        });\n        return errorDetails.message;\n      });\n    };\n\n    this.getTableData = () => {\n      const data = this.props.expenseTypes.map((eT, Id) => {\n        return _objectSpread({\n          editComp: React.createElement(Edit, {\n            name: \"edit\".concat(eT._id),\n            onClick: () => this.handleEdit(eT._id),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62\n            },\n            __self: this\n          })\n        }, eT, {\n          trashComp: React.createElement(Delete, {\n            name: \"delete\".concat(eT._id),\n            onClick: () => this.handleDelete(eT._id),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 66\n            },\n            __self: this\n          })\n        });\n      });\n      this.setState({\n        data\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.getTableData();\n    };\n\n    this.componentDidUpdate = prevProps => {\n      if (this.props.expenseTypes !== prevProps.expenseTypes) {\n        this.getTableData();\n        getExpenseType();\n      }\n    };\n\n    this.handleFocus = () => {\n      this.setState({\n        errors: {}\n      });\n    };\n\n    this.handleNameChange = event => {\n      const name = event.target.value;\n      this.setState({\n        name\n      });\n    };\n\n    this.handleNeedChange = event => {\n      const need = event.target.value;\n      this.setState({\n        need\n      });\n    };\n\n    this.handleAdd = () => {\n      const res = this.validateFormDetails();\n\n      if (res === \"valid\") {\n        this.props.addExpenseType({\n          name: _.startCase(this.state.name),\n          need: this.state.need\n        });\n        this.setState({\n          name: \"\",\n          need: \"\",\n          _id: \"\"\n        });\n      }\n    };\n\n    this.handleUpdate = () => {\n      const res = this.validateFormDetails();\n\n      if (res === \"valid\") {\n        this.props.updateExpenseType({\n          name: _.startCase(this.state.name),\n          need: this.state.need,\n          _id: this.state._id\n        });\n      }\n\n      this.setState({\n        name: \"\",\n        need: \"\",\n        _id: \"\",\n        displayUpdate: false,\n        displayAdd: true\n      });\n    };\n\n    this.handleEdit = toBeEditedId => {\n      const expenseTypes = [...this.props.expenseTypes];\n      const res = expenseTypes.filter(expenseType => expenseType._id === toBeEditedId);\n      const _res$ = res[0],\n            _id = _res$._id,\n            name = _res$.name,\n            need = _res$.need;\n      this.setState({\n        _id,\n        name: name,\n        need: need,\n        displayUpdate: true,\n        displayAdd: false\n      });\n    };\n\n    this.handleDelete = toBeDeletedId => {\n      this.props.deleteExpenseType(toBeDeletedId);\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          displayUpdate = _this$state.displayUpdate,\n          displayAdd = _this$state.displayAdd;\n    const updateStyle = displayUpdate ? {\n      margin: \"15px\"\n    } : {\n      margin: \"15px\",\n      display: \"none\"\n    };\n    const addStyle = displayAdd ? {\n      margin: \"15px\"\n    } : {\n      margin: \"15px\",\n      display: \"none\"\n    };\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-4 flexBorder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Input, {\n      labelFor: \"expenseTypeName\",\n      labelName: \"Expense Type\",\n      inputId: \"expenseType\",\n      value: this.state.name,\n      type: \"text\",\n      onChange: this.handleNameChange,\n      placeholder: \"Expense Type\",\n      autoComplete: \"off\",\n      onFocus: this.handleFocus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, this.state.errors.name && _.values(this.state.errors.name)), React.createElement(Select, {\n      labelFor: \"expenseTypeNeed\",\n      labelName: \"Need\",\n      selectId: \"expenseTypeNeed\",\n      value: this.state.need,\n      onChange: this.handleNeedChange,\n      options: this.state.options,\n      onFocus: this.handleFocus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, this.state.errors.need && _.values(this.state.errors.need)), React.createElement(\"div\", {\n      className: \"buttonContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-primary btn-md\",\n      style: addStyle,\n      onClick: this.handleAdd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Add\"), React.createElement(\"button\", {\n      className: \"btn btn-primary btn-md maskDisplay\",\n      style: updateStyle,\n      onClick: this.handleUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Update\"))), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(Table, {\n      data: this.state.data,\n      columns: this.state.columns,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    expenseTypes: state.expenseType.expenseTypes\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getExpenseType: dispatch(getExpenseType()),\n    addExpenseType: expenseType => dispatch(addExpenseType(expenseType)),\n    updateExpenseType: expenseType => dispatch(updateExpenseType(expenseType)),\n    deleteExpenseType: expenseType => dispatch(deleteExpenseType(expenseType))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExpenseType);","map":{"version":3,"sources":["/Users/karthik-dhaaru/Documents/Workspace/Dharani/expense_tracker/expense_tracker_frontend/src/components/expenseType.jsx"],"names":["React","Component","Input","Select","Table","Joi","_","connect","getExpenseType","addExpenseType","updateExpenseType","deleteExpenseType","Edit","Delete","ExpenseType","state","_id","name","need","options","columns","data","errors","displayUpdate","displayAdd","schema","string","required","min","validateFormDetails","event","abortEarly","validate","error","details","map","errorDetails","errorState","message","match","setState","getTableData","props","expenseTypes","eT","Id","editComp","handleEdit","trashComp","handleDelete","componentDidMount","componentDidUpdate","prevProps","handleFocus","handleNameChange","target","value","handleNeedChange","handleAdd","res","startCase","handleUpdate","toBeEditedId","filter","expenseType","toBeDeletedId","render","updateStyle","margin","display","addStyle","color","values","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Input from \"./common/input\";\nimport Select from \"./common/select\";\nimport Table from \"./common/table\";\nimport Joi from \"joi-browser\";\nimport _ from \"lodash\";\nimport { connect } from \"react-redux\";\nimport {\n\tgetExpenseType,\n\taddExpenseType,\n\tupdateExpenseType,\n\tdeleteExpenseType\n} from \"./../actions/expenseType\";\nimport Edit from \"./common/edit\";\nimport Delete from \"./common/delete\";\n\nclass ExpenseType extends Component {\n\tstate = {\n\t\t_id: \"\",\n\t\tname: \"\",\n\t\tneed: \"\",\n\t\toptions: [\"Primary\", \"Secondary\", \"Misc\"],\n\t\tcolumns: [\"\", \"ID\", \"Type\", \"Need\", \"\"],\n\t\tdata: [],\n\t\terrors : {},\t\n\t\tdisplayUpdate: false,\n\t\tdisplayAdd: true\n\t};\n\n\tschema = {\n\t\tname: Joi.string().required(),\n\t\tneed: Joi.string()\n\t\t\t.min(3)\n\t\t\t.required()\n\t};\n\n\n\tvalidateFormDetails = (event) => { \n\t\t\n\t\tconst options = {abortEarly : false};\n\t\tconst {error} = Joi.validate({ \n\t\t   name : this.state.name,\n\t\t   need : this.state.need, \n\t\t}, this.schema,options);\n\t\n\t\tif(!error) return \"valid\";\n\t\t  \n\t\tconst errors = { ...this.state.errors };\n\t\n\t\terror.details.map(errorDetails => {\n\t\t\tconst errorState = errorDetails.message.match(/\"(.*?)\"/);\n\t\t\terrors[errorState[1]] = errorDetails.message;\n\t\t\tthis.setState({ errors });\n\t\t\treturn errorDetails.message;\n\t\t});\n\t}\n\n\tgetTableData = () => {\n\t\tconst data = this.props.expenseTypes.map((eT, Id) => {\n\t\t\treturn {\n\t\t\t\teditComp: (\n\t\t\t\t\t<Edit name={`edit${eT._id}`} onClick={() => this.handleEdit(eT._id)} />\n\t\t\t\t),\n\t\t\t\t...eT,\n\t\t\t\ttrashComp: (\n\t\t\t\t\t<Delete\n\t\t\t\t\t\tname={`delete${eT._id}`}\n\t\t\t\t\t\tonClick={() => this.handleDelete(eT._id)}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t};\n\t\t});\n\t\tthis.setState({ data });\n\t};\n\n\tcomponentDidMount = () => {\n\t\tthis.getTableData();\n\t};\n\n\tcomponentDidUpdate = prevProps => {\n\t\tif (this.props.expenseTypes !== prevProps.expenseTypes) {\n\t\t\tthis.getTableData();\n\t\t\tgetExpenseType();\n\t\t}\n\t};\n\n\thandleFocus = () => {\n\t\tthis.setState({ errors: {} });\n\t};\n\n\thandleNameChange = event => {\n\t\tconst name = event.target.value;\n\t\tthis.setState({ name });\n\t};\n\n\thandleNeedChange = event => {\n\t\tconst need = event.target.value;\n\t\tthis.setState({ need });\n\t};\n\n\thandleAdd = () => {\n\t\tconst res = this.validateFormDetails();\n\t\tif(res === \"valid\"){\n\t\t\tthis.props.addExpenseType({\n\t\t\tname: _.startCase(this.state.name),\n\t\t\tneed: this.state.need\n\t\t});\n\t\tthis.setState({ name: \"\", need: \"\", _id:\"\" });}\n\t};\n\n\thandleUpdate = () => {\n\t\tconst res = this.validateFormDetails();\n\t\tif(res === \"valid\"){\n\t\t\tthis.props.updateExpenseType({\n\t\t\tname: _.startCase(this.state.name),\n\t\t\tneed: this.state.need,\n\t\t\t_id: this.state._id\n\t\t})}\n\n\t\tthis.setState({\n\t\t\tname: \"\",\n\t\t\tneed: \"\",\n\t\t\t_id: \"\",\n\t\t\tdisplayUpdate: false,\n\t\t\tdisplayAdd: true\n\t\t});\n\t};\n\n\thandleEdit = toBeEditedId => {\n\t\t\n\t\tconst expenseTypes = [...this.props.expenseTypes];\n\t\tconst res = expenseTypes.filter(\n\t\t\texpenseType => expenseType._id === toBeEditedId\n\t\t);\n\t\tconst { _id, name, need } = res[0];\n\n\t\tthis.setState({\n\t\t\t_id,\n\t\t\tname: name,\n\t\t\tneed: need,\n\t\t\tdisplayUpdate: true,\n\t\t\tdisplayAdd: false\n\t\t});\n\t};\n\n\thandleDelete = toBeDeletedId => {\n\t\tthis.props.deleteExpenseType(toBeDeletedId);\n\t};\n\n\trender() {\n\t\tconst { displayUpdate, displayAdd } = this.state;\n\n\t\tconst updateStyle = displayUpdate\n\t\t\t? { margin: \"15px\" }\n\t\t\t: { margin: \"15px\", display: \"none\" };\n\n\t\tconst addStyle = displayAdd\n\t\t\t? { margin: \"15px\" }\n\t\t\t: { margin: \"15px\", display: \"none\" };\n\n\t\treturn (\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"row \">\n\t\t\t\t\t<div className=\"col-4 flexBorder\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tlabelFor=\"expenseTypeName\"\n\t\t\t\t\t\t\tlabelName=\"Expense Type\"\n\t\t\t\t\t\t\tinputId=\"expenseType\"\n\t\t\t\t\t\t\tvalue={this.state.name}\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonChange={this.handleNameChange}\n\t\t\t\t\t\t\tplaceholder=\"Expense Type\"\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tonFocus={this.handleFocus}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t <div style={{color : \"red\"}}> \n            \t\t\t\t\t{this.state.errors.name &&\n\t\t\t\t\t\t\t\t_.values(this.state.errors.name)}\n            \t\t\t</div>\n\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tlabelFor=\"expenseTypeNeed\"\n\t\t\t\t\t\t\tlabelName=\"Need\"\n\t\t\t\t\t\t\tselectId=\"expenseTypeNeed\"\n\t\t\t\t\t\t\tvalue={this.state.need}\n\t\t\t\t\t\t\tonChange={this.handleNeedChange}\n\t\t\t\t\t\t\toptions={this.state.options}\n\t\t\t\t\t\t\tonFocus={this.handleFocus}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div style={{color : \"red\"}}> \n            \t\t\t\t\t{this.state.errors.need &&\n\t\t\t\t\t\t\t\t_.values(this.state.errors.need)}\n            \t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"buttonContainer\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"btn btn-primary btn-md\"\n\t\t\t\t\t\t\t\tstyle={addStyle}\n\t\t\t\t\t\t\t\tonClick={this.handleAdd}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"btn btn-primary btn-md maskDisplay\"\n\t\t\t\t\t\t\t\tstyle={updateStyle}\n\t\t\t\t\t\t\t\tonClick={this.handleUpdate}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tUpdate\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t<Table data={this.state.data} columns={this.state.columns} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = state => {\n\treturn {\n\t\texpenseTypes: state.expenseType.expenseTypes\n\t};\n};\n\nconst mapDispatchToProps = dispatch => {\n\treturn {\n\t\tgetExpenseType: dispatch(getExpenseType()),\n\t\taddExpenseType: expenseType => dispatch(addExpenseType(expenseType)),\n\t\tupdateExpenseType: expenseType => dispatch(updateExpenseType(expenseType)),\n\t\tdeleteExpenseType: expenseType => dispatch(deleteExpenseType(expenseType))\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(ExpenseType);\n"]},"metadata":{},"sourceType":"module"}